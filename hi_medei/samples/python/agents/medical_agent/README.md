# Patient Data Manager Agent with A2A Protocol

이 에이전트는 병원 내 환자 검색 및 진료문서 작성을 위한 의료 AI 에이전트입니다. 기존 LangGraph 에이전트와 협업하여 종합적인 의료 서비스를 제공합니다.

## 주요 기능

### 🔍 환자 검색 시스템

- **환자 ID/이름 검색**: 기본 환자 정보 조회
- **증상 기반 검색**: 벡터 검색을 활용한 유사 증상 환자 검색
- **진료과별 검색**: 내과/외과/당일진료 분류별 환자 검색
- **처방 이력 검색**: 특정 약물 처방 이력이 있는 환자 검색

### 📝 진료문서 작성

- **SOAP 노트 생성**: 구조화된 진료 기록 자동 생성
- **처방전 작성**: AI 기반 약물 처방 추천 및 상호작용 검사
- **진료 요약서**: 환자의 전체 진료 이력 요약
- **의료진 인계서**: 교대 시 필요한 환자 상태 인계 문서

### 🧠 AI 분석 기능

- **증상 분석**: 환자 증상을 분석하여 가능한 진단 제시
- **과거 진료 패턴 분석**: 환자의 과거 진료 이력 기반 예측
- **응급도 평가**: 환자 상태의 응급도 자동 평가

## 기존 LangGraph 에이전트와의 협업

### 협업 시나리오

1. **종합 진료 상담**: 환자 데이터 + 의료 문헌 검색
2. **처방 최적화**: 환자 이력 + 최신 가이드라인
3. **진단 지원**: 유사 사례 + 의료 지식 통합

## 기술 스택

- **LangChain/LangGraph**: 에이전트 프레임워크
- **ChromaDB**: 벡터 데이터베이스
- **OpenAI**: LLM 및 임베딩
- **Pydantic**: 데이터 모델 검증
- **A2A Protocol**: 에이전트 간 통신

## 설치 및 실행

1. 환경 설정:

   ```bash
   cd hi_medei/samples/python/agents/medical_agent
   echo "OPENAI_API_KEY=your_api_key_here" > .env
   ```

2. 에이전트 실행:

   ```bash
   uv run . --port 10001
   ```

3. 클라이언트 연결:
   ```bash
   cd ../../../hosts/cli
   uv run .
   ```

## 데이터 소스

- `../../../../data/`: 환자 데이터 (내과환자, 외과환자, 당일진료환자, 약처방)
- `../../../../VectorStore2/`: 벡터 임베딩 데이터

## 제한사항

- 현재는 텍스트 기반 입출력만 지원
- 실제 의료 환경에서는 HIPAA 등 의료 정보 보호 규정 준수 필요
- 데모용 데이터 사용 (실제 환자 데이터 아님)
